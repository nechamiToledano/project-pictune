import './polyfills.server.mjs';
import{a as W,b as X,c as y,d as te,e as x,f as ie,g as ne,h as oe,i as ae,j as re,k as le,l as ce,m as me,n as se,o as de,p as pe,q as ue,r as fe,s as ge,t as Me}from"./chunk-2QCRDM6X.mjs";import{d as Z,e as ee}from"./chunk-KTZXPR5P.mjs";import"./chunk-I3U5347A.mjs";import"./chunk-IDALE5SX.mjs";import"./chunk-67XILVAA.mjs";import{a as U,b as q}from"./chunk-LSU7UT5O.mjs";import{a as be,c as ye,d as xe}from"./chunk-JIFKGHGB.mjs";import{a as _,i as _e,l as he,o as Ce}from"./chunk-PLV2ZNAN.mjs";import"./chunk-JPBG2L4B.mjs";import{a as Y,b as G}from"./chunk-YLXWEWHB.mjs";import{a as $,d as z,g as N,h as Q}from"./chunk-AF4CMDFM.mjs";import{a as J,b as K}from"./chunk-M6DPW4RJ.mjs";import{e as R}from"./chunk-ULA7H4B2.mjs";import"./chunk-E473LQDB.mjs";import{l as j,n as B,o as H}from"./chunk-VG6OVTLA.mjs";import{$b as T,Db as n,Eb as o,Fb as u,Gb as f,Hb as g,Jb as L,Lb as m,Mb as b,Nc as I,Oc as A,Qb as v,Rb as S,Sb as P,Wb as a,Xb as M,Ya as c,ac as E,bb as F,cc as O,dc as k,hb as D,mb as d,ra as h,sa as C,ub as p,ud as V,zb as w}from"./chunk-NW7SNNUU.mjs";import"./chunk-X2SEQXRR.mjs";var ve=()=>[5,10,25,100],Se=e=>["/music-files/edit",e];function Pe(e,t){e&1&&(n(0,"div",8),u(1,"mat-spinner"),o())}function Oe(e,t){e&1&&(n(0,"th",22),a(1,"ID"),o())}function ke(e,t){if(e&1&&(n(0,"td",23),a(1),o()),e&2){let i=t.$implicit;c(),M(i.id)}}function De(e,t){e&1&&(n(0,"th",22),a(1,"File Name"),o())}function Le(e,t){if(e&1&&(n(0,"td",23),a(1),o()),e&2){let i=t.$implicit;c(),M(i.fileName)}}function Te(e,t){e&1&&(n(0,"th",22),a(1,"Upload Date"),o())}function Ee(e,t){if(e&1&&(n(0,"td",23),a(1),O(2,"date"),o()),e&2){let i=t.$implicit;c(),M(k(2,1,i.uploadDate))}}function Ie(e,t){e&1&&(n(0,"th",24),a(1,"Actions"),o())}function Ae(e,t){if(e&1){let i=L();n(0,"td",23)(1,"button",25),m("click",function(){let l=h(i).$implicit,s=b();return C(s.playMusicFile(l.id))}),n(2,"mat-icon"),a(3,"play_arrow"),o()(),n(4,"button",26),m("click",function(l){let s=h(i).$implicit,we=b();return C(we.toggleLike(s.id,l))}),n(5,"mat-icon"),a(6),o()(),n(7,"button",27)(8,"mat-icon"),a(9,"edit"),o()(),n(10,"button",28),m("click",function(){let l=h(i).$implicit,s=b();return C(s.deleteMusicFile(l.id))}),n(11,"mat-icon"),a(12,"delete"),o()()()}if(e&2){let i=t.$implicit;c(4),p("color",i.isLiked?"warn":""),c(2),M(i.isLiked?"favorite":"favorite_border"),c(),p("routerLink",E(3,Se,i.id))}}function Re(e,t){e&1&&u(0,"tr",29)}function Ve(e,t){e&1&&u(0,"tr",30)}function je(e,t){e&1&&(n(0,"tr",20)(1,"td",31),a(2,"No data matching the filter"),o()())}var Fe=class e{constructor(t,i){this.store=t;this.dialog=i;this.loading$=this.store.select(ye)}displayedColumns=["id","fileName","uploadDate","actions"];dataSource=new ge([]);loading$;paginator;sort;ngOnInit(){this.store.dispatch(_({})),this.store.select(be).subscribe(t=>{this.dataSource.data=t})}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}applyFilter(t){let i=t.target.value;this.dataSource.filter=i.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}deleteMusicFile(t){this.dialog.open(Me,{width:"350px",data:{title:"Confirm Delete",message:"Are you sure you want to delete this music file?",confirmText:"Delete",cancelText:"Cancel"}}).afterClosed().subscribe(r=>{r&&this.store.dispatch(_e({id:t}))})}toggleLike(t,i){i.stopPropagation(),this.store.dispatch(he({id:t}))}playMusicFile(t){this.store.dispatch(Ce({id:t})),this.store.select(xe(t)).subscribe(i=>{i&&typeof window<"u"&&window.open(i,"_blank")})}filterByOwner(){this.store.dispatch(_({owner:!0}))}filterByFavorites(){this.store.dispatch(_({favorites:!0}))}resetFilters(){this.store.dispatch(_({}))}static \u0275fac=function(i){return new(i||e)(F(V),F(W))};static \u0275cmp=D({type:e,selectors:[["app-music-file-list"]],viewQuery:function(i,r){if(i&1&&(v(y,5),v(x,5)),i&2){let l;S(l=P())&&(r.paginator=l.first),S(l=P())&&(r.sort=l.first)}},decls:38,vars:9,consts:[[1,"music-file-list-container"],[1,"header"],[1,"filters"],["appearance","outline",1,"filter-field"],["matInput","","placeholder","Search music files...",3,"keyup"],["matSuffix",""],[1,"filter-buttons"],["mat-button","",3,"click"],[1,"loading-shade"],[1,"table-container"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","fileName"],["matColumnDef","uploadDate"],["matColumnDef","actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"mat-row"],["aria-label","Select page of music files",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["mat-icon-button","","color","primary","matTooltip","Play",3,"click"],["mat-icon-button","","matTooltip","Like",3,"click","color"],["mat-icon-button","","color","primary","matTooltip","Edit",3,"routerLink"],["mat-icon-button","","color","warn","matTooltip","Delete",3,"click"],["mat-header-row",""],["mat-row",""],["colspan","4",1,"mat-cell"]],template:function(i,r){i&1&&(n(0,"div",0)(1,"div",1)(2,"h1"),a(3,"Music Files"),o()(),n(4,"div",2)(5,"mat-form-field",3)(6,"mat-label"),a(7,"Filter"),o(),n(8,"input",4),m("keyup",function(s){return r.applyFilter(s)}),o(),n(9,"mat-icon",5),a(10,"search"),o()(),n(11,"div",6)(12,"button",7),m("click",function(){return r.resetFilters()}),a(13,"All Files"),o(),n(14,"button",7),m("click",function(){return r.filterByOwner()}),a(15,"My Files"),o(),n(16,"button",7),m("click",function(){return r.filterByFavorites()}),a(17,"Favorites"),o()()(),d(18,Pe,2,0,"div",8),O(19,"async"),n(20,"div",9)(21,"table",10),f(22,11),d(23,Oe,2,0,"th",12)(24,ke,2,1,"td",13),g(),f(25,14),d(26,De,2,0,"th",12)(27,Le,2,1,"td",13),g(),f(28,15),d(29,Te,2,0,"th",12)(30,Ee,3,3,"td",13),g(),f(31,16),d(32,Ie,2,0,"th",17)(33,Ae,13,5,"td",13),g(),d(34,Re,1,0,"tr",18)(35,Ve,1,0,"tr",19)(36,je,3,0,"tr",20),o(),u(37,"mat-paginator",21),o()()),i&2&&(c(18),w(k(19,6,r.loading$)?18:-1),c(3),p("dataSource",r.dataSource),c(13),p("matHeaderRowDef",r.displayedColumns),c(),p("matRowDefColumns",r.displayedColumns),c(),w(r.dataSource.filteredData.length===0?36:-1),c(),p("pageSizeOptions",T(8,ve)))},dependencies:[I,A,R,fe,oe,re,se,le,ae,de,ce,me,pe,ue,ne,x,ie,te,y,Q,N,$,z,G,Y,H,B,j,q,U,K,J,X,ee,Z],styles:[".music-file-list-container[_ngcontent-%COMP%]{padding:16px}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.filters[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:16px}.filter-field[_ngcontent-%COMP%]{width:100%}.filter-buttons[_ngcontent-%COMP%]{display:flex;gap:8px;margin-top:8px}.table-container[_ngcontent-%COMP%]{position:relative;min-height:200px}table[_ngcontent-%COMP%]{width:100%}.loading-shade[_ngcontent-%COMP%]{position:absolute;inset:0;background:#00000026;z-index:1;display:flex;align-items:center;justify-content:center}.mat-column-actions[_ngcontent-%COMP%]{width:160px;text-align:center}.page-container[_ngcontent-%COMP%]{padding:1rem}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem}.header-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.header-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:3rem;height:3rem;border-radius:.75rem;background:linear-gradient(to right,#dc262633,#2563eb33)}.header-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1.5rem;width:1.5rem;height:1.5rem;color:var(--text-primary)}h1[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:600;margin:0;color:var(--text-primary)}.action-button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:0 1.25rem;height:2.5rem}.content-card[_ngcontent-%COMP%]{position:relative;overflow:hidden}.card-header-line[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;height:4px;background:linear-gradient(to right,#dc262633,#2563eb33)}.card-content[_ngcontent-%COMP%]{padding:1.5rem}.filters[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:1.5rem}.filter-field[_ngcontent-%COMP%]{margin-bottom:.5rem;width:100%}.filter-buttons[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem;margin-top:8px}.filter-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;background-color:#ffffff0d;border-radius:.5rem;padding:.25rem 1rem;transition:all .2s ease}.filter-btn[_ngcontent-%COMP%]:hover{background-color:#ffffff1a;transform:translateY(-1px)}.filter-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1.25rem;height:1.25rem;width:1.25rem}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:3rem 0;color:var(--text-secondary)}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:1rem}.table-container[_ngcontent-%COMP%]{position:relative;min-height:200px;overflow:auto}.data-table[_ngcontent-%COMP%]{width:100%}.file-cell[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.file-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:2rem;height:2rem;border-radius:.5rem;background:#ffffff0d}.file-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1.25rem;height:1.25rem;width:1.25rem;color:var(--icon-color)}.date-cell[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.date-cell[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1.25rem;height:1.25rem;width:1.25rem;color:var(--icon-color)}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:.25rem}.play-btn[_ngcontent-%COMP%]{color:#4ade80!important}.liked[_ngcontent-%COMP%]{color:#ef4444!important}.empty-row[_ngcontent-%COMP%]{height:10rem}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:2rem;color:var(--text-muted)}.empty-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:2.5rem;width:2.5rem;height:2.5rem;margin-bottom:1rem}"]})};export{Fe as MusicFileListComponent};
