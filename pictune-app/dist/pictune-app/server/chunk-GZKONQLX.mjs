import './polyfills.server.mjs';
import{b as Z,c as ee}from"./chunk-RAEV4Z4K.mjs";import{d as W,g as X,j as Y}from"./chunk-FEPBYFWV.mjs";import{a as R,b as $,c as j,e as G,f as D}from"./chunk-AZPBKVHK.mjs";import"./chunk-JPBG2L4B.mjs";import{a as z,b as J}from"./chunk-YLXWEWHB.mjs";import{a as k,b as V,g as L,h as H}from"./chunk-AF4CMDFM.mjs";import{a as K,b as Q}from"./chunk-M6DPW4RJ.mjs";import{a as U,d as S}from"./chunk-ULA7H4B2.mjs";import{a as I,b as p,d as y,e as N,g as w,h as P,i as T,j as A,l as O}from"./chunk-E473LQDB.mjs";import{n as B,o as q}from"./chunk-VG6OVTLA.mjs";import{Db as o,Eb as t,Fb as c,Lb as _,Mb as h,Nc as b,Wb as a,Xb as C,Ya as n,bb as u,cc as v,dc as F,hb as E,mb as d,ub as f,ud as x,zb as l}from"./chunk-NW7SNNUU.mjs";import"./chunk-X2SEQXRR.mjs";function ie(e,r){e&1&&(o(0,"mat-error"),a(1," Username is required "),t())}function re(e,r){e&1&&(o(0,"mat-error"),a(1," Email is required "),t())}function oe(e,r){e&1&&(o(0,"mat-error"),a(1," Please enter a valid email address "),t())}function ne(e,r){e&1&&(o(0,"mat-error"),a(1," Password is required "),t())}function ae(e,r){e&1&&(o(0,"mat-error"),a(1," Password must be at least 6 characters "),t())}function me(e,r){if(e&1&&(o(0,"div",2)(1,"mat-form-field",3)(2,"mat-label"),a(3,"Password"),t(),c(4,"input",10),d(5,ne,2,0,"mat-error")(6,ae,2,0,"mat-error"),t()()),e&2){let m,i,s=h();n(5),l((m=s.userForm.get("password"))!=null&&m.hasError("required")?5:-1),n(),l((i=s.userForm.get("password"))!=null&&i.hasError("minlength")?6:-1)}}function se(e,r){e&1&&c(0,"mat-spinner",9)}function le(e,r){if(e&1&&(o(0,"span"),a(1),t()),e&2){let m=h();n(),C(m.isEditMode?"Update":"Create")}}var te=class e{constructor(r,m,i,s){this.formBuilder=r;this.route=m;this.router=i;this.store=s;this.loading$=this.store.select(ee),this.selectedUser$=this.store.select(Z)}userForm;userId=null;isEditMode=!1;loading$;selectedUser$;ngOnInit(){this.initForm(),this.userId=this.route.snapshot.paramMap.get("id"),this.isEditMode=!!this.userId,this.isEditMode&&this.userId&&(this.store.dispatch(W({id:this.userId})),this.selectedUser$.subscribe(r=>{r&&this.userForm.patchValue({userName:r.userName,email:r.email})}))}initForm(){this.userForm=this.formBuilder.group({userName:["",[p.required]],email:["",[p.required,p.email]]}),this.isEditMode||this.userForm.addControl("password",this.formBuilder.control("",[p.required,p.minLength(6)]))}onSubmit(){this.userForm.invalid||(this.isEditMode&&this.userId?this.store.dispatch(Y({id:this.userId,user:{userName:this.userForm.value.userName,email:this.userForm.value.email}})):this.store.dispatch(X({user:this.userForm.value})))}onCancel(){this.router.navigate(["/users"])}static \u0275fac=function(m){return new(m||e)(u(A),u(U),u(S),u(x))};static \u0275cmp=E({type:e,selectors:[["app-user-form"]],decls:29,vars:12,consts:[[1,"user-form-container"],[3,"ngSubmit","formGroup"],[1,"form-row"],["appearance","outline",1,"full-width"],["matInput","","formControlName","userName","placeholder","Enter username"],["matInput","","formControlName","email","placeholder","Enter email","type","email"],[1,"form-actions"],["mat-button","","type","button",3,"click"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["diameter","20"],["matInput","","formControlName","password","placeholder","Enter password","type","password"]],template:function(m,i){if(m&1&&(o(0,"div",0)(1,"mat-card")(2,"mat-card-header")(3,"mat-card-title"),a(4),t()(),o(5,"mat-card-content")(6,"form",1),_("ngSubmit",function(){return i.onSubmit()}),o(7,"div",2)(8,"mat-form-field",3)(9,"mat-label"),a(10,"Username"),t(),c(11,"input",4),d(12,ie,2,0,"mat-error"),t()(),o(13,"div",2)(14,"mat-form-field",3)(15,"mat-label"),a(16,"Email"),t(),c(17,"input",5),d(18,re,2,0,"mat-error")(19,oe,2,0,"mat-error"),t()(),d(20,me,7,2,"div",2),o(21,"div",6)(22,"button",7),_("click",function(){return i.onCancel()}),a(23,"Cancel"),t(),o(24,"button",8),v(25,"async"),d(26,se,1,0,"mat-spinner",9),v(27,"async"),d(28,le,2,1,"span"),t()()()()()()),m&2){let s,g,M;n(4),C(i.isEditMode?"Edit User":"Create User"),n(2),f("formGroup",i.userForm),n(6),l((s=i.userForm.get("userName"))!=null&&s.hasError("required")?12:-1),n(6),l((g=i.userForm.get("email"))!=null&&g.hasError("required")?18:-1),n(),l((M=i.userForm.get("email"))!=null&&M.hasError("email")?19:-1),n(),l(i.isEditMode?-1:20),n(4),f("disabled",i.userForm.invalid||F(25,8,i.loading$)),n(2),l(F(27,10,i.loading$)?26:28)}},dependencies:[b,O,w,I,y,N,P,T,D,R,j,G,$,H,L,k,V,J,z,q,B,Q,K],styles:[".user-form-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto}.form-row[_ngcontent-%COMP%]{margin-bottom:16px}.full-width[_ngcontent-%COMP%]{width:100%}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:8px;margin-top:24px}mat-spinner[_ngcontent-%COMP%]{display:inline-block;margin-right:8px}"]})};export{te as UserFormComponent};
