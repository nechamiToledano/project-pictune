import{a as bi}from"./chunk-7RWCIHFI.js";import{a as ve,b as Q,c as be,d as se,e as V,f as pi,g as di,h as fi}from"./chunk-BNUEH4AB.js";import{a as ki,b as Ii,c as Fi,d as Mi,e as xi,f as Ci,g as Ti,h as Ze,i as Oi,j as wi,k as Ke,l as Ri,m as Ui,n as Je,o as Pi,p as $i}from"./chunk-4B5H75DD.js";import{a as Xe,b as Bi,c as ji,d as Di,e as Ni,f as Li,g as zi,h as Hi,i as Vi,j as Gi,k as qi,l as Zi,m as Ki,n as Ji,o as Xi,p as Wi,q as Qi,r as Yi}from"./chunk-GCTCL4LV.js";import{a as en,b as tn,c as nn,d as rn,e as sn,f as on,g as an,h as cn,i as ln,j as un,k as pn,l as dn,m as fn,n as mn,o as hn,p as yn,q as gn,r as vn,s as bn,t as An,u as Sn,v as En}from"./chunk-KG45P2CG.js";import{j as Ei,m as _i}from"./chunk-WLEV262L.js";import{a as Ge,b as Ai,c as Si,e as qe}from"./chunk-WLAAEWUG.js";import"./chunk-I3QGOUHP.js";import{b as Yt,c as w,f as ei}from"./chunk-VZDUFQRZ.js";import{n as vi}from"./chunk-YZJZENHB.js";import{$ as W,Ac as Qt,C as X,Cb as Vt,D,Ea as pe,Eb as $e,Ec as ti,F as m,Fa as de,Fb as Be,Fc as ii,G as Re,H as Et,Ha as Pt,Hc as He,Ic as ye,J as H,Jb as je,Jc as ni,K as _t,Kb as De,Kc as ri,Lb as Ne,Lc as si,M as kt,Ma as $t,Mc as oi,N as It,Na as Bt,Nc as ai,Oc as Ve,Pb as Le,Pc as ge,Q as Ue,Qc as ci,Rb as ze,Rc as L,T as Ft,Ta as ie,Ua as jt,Uc as li,V as Mt,Vc as J,W as xt,Wc as ui,Y as Ct,Ya as Dt,_ as N,a as k,ac as Gt,ad as mi,b as R,ba as O,ca as Tt,cb as ne,e as te,eb as fe,fa as F,fb as Nt,h as j,hb as Pe,ia as x,ic as qt,j as yt,jd as hi,k as gt,ka as h,l as vt,la as u,mb as Lt,n as bt,oa as le,od as yi,p as f,pa as Ot,pb as zt,q as At,qd as gi,sb as Ht,t as St,ta as wt,u as p,ua as Rt,vc as Zt,w as I,wb as me,wc as Kt,xa as Ut,xb as re,xc as Jt,yb as he,yc as Xt,za as ue,zc as Wt}from"./chunk-6WES2Y7B.js";var Ae=class t{constructor(i){this.store=i;(typeof window<"u"?localStorage.getItem("token"):null)&&this.store.dispatch(se())}title="pictune-app";static \u0275fac=function(e){return new(e||t)(Dt(L))};static \u0275cmp=ne({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(e,n){e&1&&he(0,"router-outlet")},dependencies:[Yt],encapsulation:2})};var kn=(t,i)=>{let e=u(w);return u(L).select(fi).pipe(H(1),p(r=>r&&r.roles?.includes("Admin")?!0:e.createUrlTree(["/login"])),m(()=>f(e.createUrlTree(["/login"]))))};var Se=class t{constructor(i){this.router=i}canActivate(){let i=typeof window<"u"?localStorage.getItem("token"):null,e=typeof window<"u"?localStorage.getItem("user"):null;if(i&&e){var n=JSON.parse(e);return n.roles.includes("Admin")?(this.router.navigate(["/"]),!1):!0}else return!0}static \u0275fac=function(e){return new(e||t)(h(w))};static \u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"})};var Fn=[{path:"login",loadComponent:()=>import("./chunk-GFJVYGVX.js").then(t=>t.LoginComponent),canActivate:[Se]},{path:"",loadComponent:()=>import("./chunk-N4ERANYV.js").then(t=>t.DashboardComponent),canActivate:[kn],children:[{path:"",redirectTo:"users",pathMatch:"full"},{path:"users",children:[{path:"",loadComponent:()=>import("./chunk-VZEMC42J.js").then(t=>t.UserListComponent)},{path:"new",loadComponent:()=>import("./chunk-WWQOCJZ7.js").then(t=>t.UserFormComponent)},{path:"edit/:id",loadComponent:()=>import("./chunk-WWQOCJZ7.js").then(t=>t.UserFormComponent)}]},{path:"music-files",children:[{path:"",loadComponent:()=>import("./chunk-GEHOSVL5.js").then(t=>t.MusicFileListComponent)},{path:"edit/:id",loadComponent:()=>import("./chunk-PUPRAPXY.js").then(t=>t.MusicFileFormComponent)}]},{path:"playlists",children:[{path:"",loadComponent:()=>import("./chunk-7323IQE5.js").then(t=>t.PlaylistListComponent)},{path:"new",loadComponent:()=>import("./chunk-YVSKPPZH.js").then(t=>t.PlaylistFormComponent)},{path:"edit/:id",loadComponent:()=>import("./chunk-YVSKPPZH.js").then(t=>t.PlaylistFormComponent)}]},{path:"analytics",loadComponent:()=>import("./chunk-ZAWEGGRJ.js").then(t=>t.AnalyticsComponent)},{path:"report",loadComponent:()=>import("./chunk-6I67QVZG.js").then(t=>t.ReportComponent)}]},{path:"**",redirectTo:""}];var fr={dispatch:!0,functional:!1,useEffectsErrorHandler:!0},Ee="__@ngrx/effects_create__";function g(t,i={}){let e=i.functional?t:t(),n=k(k({},fr),i);return Object.defineProperty(e,Ee,{value:n}),e}function mr(t){return Object.getOwnPropertyNames(t).filter(n=>t[n]&&t[n].hasOwnProperty(Ee)?t[n][Ee].hasOwnProperty("dispatch"):!1).map(n=>{let r=t[n][Ee];return k({propertyName:n},r)})}function hr(t){return mr(t)}function Cn(t){return Object.getPrototypeOf(t)}function yr(t){return!!t.constructor&&t.constructor.name!=="Object"&&t.constructor.name!=="Function"}function Tn(t){return typeof t=="function"}function gr(t){return t.filter(Tn)}function vr(t,i,e){let n=Cn(t),s=!!n&&n.constructor.name!=="Object"?n.constructor.name:null,o=hr(t).map(({propertyName:l,dispatch:b,useEffectsErrorHandler:a})=>{let E=typeof t[l]=="function"?t[l]():t[l],c=a?e(E,i):E;return b===!1?c.pipe(_t()):c.pipe(Ft()).pipe(p(C=>({effect:t[l],notification:C,propertyName:l,sourceName:s,sourceInstance:t})))});return X(...o)}var br=10;function On(t,i,e=br){return t.pipe(m(n=>(i&&i.handleError(n),e<=1?t:On(t,i,e-1))))}var Z=(()=>{class t extends te{constructor(e){super(),e&&(this.source=e)}lift(e){let n=new t;return n.source=this,n.operator=e,n}static{this.\u0275fac=function(n){return new(n||t)(h(ge))}}static{this.\u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function v(...t){return D(i=>t.some(e=>typeof e=="string"?e===i.type:e.type===i.type))}var Rs=new x("@ngrx/effects Internal Root Guard"),Us=new x("@ngrx/effects User Provided Effects"),Ps=new x("@ngrx/effects Internal Root Effects"),$s=new x("@ngrx/effects Internal Root Effects Instances"),Bs=new x("@ngrx/effects Internal Feature Effects"),js=new x("@ngrx/effects Internal Feature Effects Instance Groups"),Ar=new x("@ngrx/effects Effects Error Handler",{providedIn:"root",factory:()=>On}),Qe="@ngrx/effects/init",Sr=ii(Qe);function Er(t,i){if(t.notification.kind==="N"){let e=t.notification.value;!_r(e)&&i.handleError(new Error(`Effect ${kr(t)} dispatched an invalid action: ${Ir(e)}`))}}function _r(t){return typeof t!="function"&&t&&t.type&&typeof t.type=="string"}function kr({propertyName:t,sourceInstance:i,sourceName:e}){let n=typeof i[t]=="function";return!!e?`"${e}.${String(t)}${n?"()":""}"`:`"${String(t)}()"`}function Ir(t){try{return JSON.stringify(t)}catch{return t}}var Fr="ngrxOnIdentifyEffects";function Mr(t){return Ye(t,Fr)}var xr="ngrxOnRunEffects";function Cr(t){return Ye(t,xr)}var Tr="ngrxOnInitEffects";function Or(t){return Ye(t,Tr)}function Ye(t,i){return t&&i in t&&typeof t[i]=="function"}var wn=(()=>{class t extends j{constructor(e,n){super(),this.errorHandler=e,this.effectsErrorHandler=n}addEffects(e){this.next(e)}toActions(){return this.pipe(Ue(e=>yr(e)?Cn(e):e),I(e=>e.pipe(Ue(wr))),I(e=>{let n=e.pipe(It(s=>Rr(this.errorHandler,this.effectsErrorHandler)(s)),p(s=>(Er(s,this.errorHandler),s.notification)),D(s=>s.kind==="N"&&s.value!=null),kt()),r=e.pipe(H(1),D(Or),p(s=>s.ngrxOnInitEffects()));return X(n,r)}))}static{this.\u0275fac=function(n){return new(n||t)(h(de),h(Ar))}}static{this.\u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function wr(t){return Mr(t)?t.ngrxOnIdentifyEffects():""}function Rr(t,i){return e=>{let n=vr(e,t,i);return Cr(e)?e.ngrxOnRunEffects(n):n}}var Ur=(()=>{class t{get isStarted(){return!!this.effectsSubscription}constructor(e,n){this.effectSources=e,this.store=n,this.effectsSubscription=null}start(){this.effectsSubscription||(this.effectsSubscription=this.effectSources.toActions().subscribe(this.store))}ngOnDestroy(){this.effectsSubscription&&(this.effectsSubscription.unsubscribe(),this.effectsSubscription=null)}static{this.\u0275fac=function(n){return new(n||t)(h(wn),h(L))}}static{this.\u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function Rn(...t){let i=t.flat(),e=gr(i);return le([e,Ot(()=>{u(ri),u(si,{optional:!0});let n=u(Ur),r=u(wn),s=!n.isStarted;s&&n.start();for(let o of i){let l=Tn(o)?u(o):o;r.addEffects(l)}s&&u(L).dispatch(Sr())})])}var ae="PERFORM_ACTION",Pr="REFRESH",Nn="RESET",Ln="ROLLBACK",zn="COMMIT",Hn="SWEEP",Vn="TOGGLE_ACTION",$r="SET_ACTIONS_ACTIVE",Gn="JUMP_TO_STATE",qn="JUMP_TO_ACTION",dt="IMPORT_STATE",Zn="LOCK_CHANGES",Kn="PAUSE_RECORDING",Y=class{constructor(i,e){if(this.action=i,this.timestamp=e,this.type=ae,typeof i.type>"u")throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?')}},et=class{constructor(){this.type=Pr}},tt=class{constructor(i){this.timestamp=i,this.type=Nn}},it=class{constructor(i){this.timestamp=i,this.type=Ln}},nt=class{constructor(i){this.timestamp=i,this.type=zn}},rt=class{constructor(){this.type=Hn}},st=class{constructor(i){this.id=i,this.type=Vn}};var ot=class{constructor(i){this.index=i,this.type=Gn}},at=class{constructor(i){this.actionId=i,this.type=qn}},ct=class{constructor(i){this.nextLiftedState=i,this.type=dt}},lt=class{constructor(i){this.status=i,this.type=Zn}},ut=class{constructor(i){this.status=i,this.type=Kn}};var Fe=new x("@ngrx/store-devtools Options"),Pn=new x("@ngrx/store-devtools Initial Config");function Jn(){return null}var Br="NgRx Store DevTools";function jr(t){let i={maxAge:!1,monitor:Jn,actionSanitizer:void 0,stateSanitizer:void 0,name:Br,serialize:!1,logOnly:!1,autoPause:!1,trace:!1,traceLimit:75,features:{pause:!0,lock:!0,persist:!0,export:!0,import:"custom",jump:!0,skip:!0,reorder:!0,dispatch:!0,test:!0},connectInZone:!1},e=typeof t=="function"?t():t,n=e.logOnly?{pause:!0,export:!0,test:!0}:!1,r=e.features||n||i.features;r.import===!0&&(r.import="custom");let s=Object.assign({},i,{features:r},e);if(s.maxAge&&s.maxAge<2)throw new Error(`Devtools 'maxAge' cannot be less than 2, got ${s.maxAge}`);return s}function $n(t,i){return t.filter(e=>i.indexOf(e)<0)}function Xn(t){let{computedStates:i,currentStateIndex:e}=t;if(e>=i.length){let{state:r}=i[i.length-1];return r}let{state:n}=i[e];return n}function oe(t){return new Y(t,+Date.now())}function Dr(t,i){return Object.keys(i).reduce((e,n)=>{let r=Number(n);return e[r]=Wn(t,i[r],r),e},{})}function Wn(t,i,e){return R(k({},i),{action:t(i.action,e)})}function Nr(t,i){return i.map((e,n)=>({state:Qn(t,e.state,n),error:e.error}))}function Qn(t,i,e){return t(i,e)}function Yn(t){return t.predicate||t.actionsSafelist||t.actionsBlocklist}function Lr(t,i,e,n){let r=[],s={},o=[];return t.stagedActionIds.forEach((l,b)=>{let a=t.actionsById[l];a&&(b&&ft(t.computedStates[b],a,i,e,n)||(s[l]=a,r.push(l),o.push(t.computedStates[b])))}),R(k({},t),{stagedActionIds:r,actionsById:s,computedStates:o})}function ft(t,i,e,n,r){let s=e&&!e(t,i.action),o=n&&!i.action.type.match(n.map(b=>Bn(b)).join("|")),l=r&&i.action.type.match(r.map(b=>Bn(b)).join("|"));return s||o||l}function Bn(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function er(t){return{ngZone:t?u(pe):null,connectInZone:t}}var Me=(()=>{class t extends ye{static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Ut(t)))(r||t)}})()}static{this.\u0275prov=F({token:t,factory:t.\u0275fac})}}return t})(),_e={START:"START",DISPATCH:"DISPATCH",STOP:"STOP",ACTION:"ACTION"},pt=new x("@ngrx/store-devtools Redux Devtools Extension"),tr=(()=>{class t{constructor(e,n,r){this.config=n,this.dispatcher=r,this.zoneConfig=er(this.config.connectInZone),this.devtoolsExtension=e,this.createActionStreams()}notify(e,n){if(this.devtoolsExtension)if(e.type===ae){if(n.isLocked||n.isPaused)return;let r=Xn(n);if(Yn(this.config)&&ft(r,e,this.config.predicate,this.config.actionsSafelist,this.config.actionsBlocklist))return;let s=this.config.stateSanitizer?Qn(this.config.stateSanitizer,r,n.currentStateIndex):r,o=this.config.actionSanitizer?Wn(this.config.actionSanitizer,e,n.nextActionId):e;this.sendToReduxDevtools(()=>this.extensionConnection.send(o,s))}else{let r=R(k({},n),{stagedActionIds:n.stagedActionIds,actionsById:this.config.actionSanitizer?Dr(this.config.actionSanitizer,n.actionsById):n.actionsById,computedStates:this.config.stateSanitizer?Nr(this.config.stateSanitizer,n.computedStates):n.computedStates});this.sendToReduxDevtools(()=>this.devtoolsExtension.send(null,r,this.getExtensionConfig(this.config)))}}createChangesObservable(){return this.devtoolsExtension?new te(e=>{let n=this.zoneConfig.connectInZone?this.zoneConfig.ngZone.runOutsideAngular(()=>this.devtoolsExtension.connect(this.getExtensionConfig(this.config))):this.devtoolsExtension.connect(this.getExtensionConfig(this.config));return this.extensionConnection=n,n.init(),n.subscribe(r=>e.next(r)),n.unsubscribe}):vt}createActionStreams(){let e=this.createChangesObservable().pipe(xt()),n=e.pipe(D(a=>a.type===_e.START)),r=e.pipe(D(a=>a.type===_e.STOP)),s=e.pipe(D(a=>a.type===_e.DISPATCH),p(a=>this.unwrapAction(a.payload)),Re(a=>a.type===dt?this.dispatcher.pipe(D(E=>E.type===Ve),St(1e3),Et(1e3),p(()=>a),m(()=>f(a)),H(1)):f(a))),l=e.pipe(D(a=>a.type===_e.ACTION),p(a=>this.unwrapAction(a.payload))).pipe(W(r)),b=s.pipe(W(r));this.start$=n.pipe(W(r)),this.actions$=this.start$.pipe(N(()=>l)),this.liftedActions$=this.start$.pipe(N(()=>b))}unwrapAction(e){return typeof e=="string"?(0,eval)(`(${e})`):e}getExtensionConfig(e){let n={name:e.name,features:e.features,serialize:e.serialize,autoPause:e.autoPause??!1,trace:e.trace??!1,traceLimit:e.traceLimit??75};return e.maxAge!==!1&&(n.maxAge=e.maxAge),n}sendToReduxDevtools(e){try{e()}catch(n){console.warn("@ngrx/store-devtools: something went wrong inside the redux devtools",n)}}static{this.\u0275fac=function(n){return new(n||t)(h(pt),h(Fe),h(Me))}}static{this.\u0275prov=F({token:t,factory:t.\u0275fac})}}return t})(),Ie={type:He},zr="@ngrx/store-devtools/recompute",Hr={type:zr};function ir(t,i,e,n,r){if(n)return{state:e,error:"Interrupted by an error up the chain"};let s=e,o;try{s=t(e,i)}catch(l){o=l.toString(),r.handleError(l)}return{state:s,error:o}}function ke(t,i,e,n,r,s,o,l,b){if(i>=t.length&&t.length===s.length)return t;let a=t.slice(0,i),E=s.length-(b?1:0);for(let c=i;c<E;c++){let A=s[c],C=r[A].action,y=a[c-1],d=y?y.state:n,P=y?y.error:void 0,$=o.indexOf(A)>-1?y:ir(e,C,d,P,l);a.push($)}return b&&a.push(t[t.length-1]),a}function Vr(t,i){return{monitorState:i(void 0,{}),nextActionId:1,actionsById:{0:oe(Ie)},stagedActionIds:[0],skippedActionIds:[],committedState:t,currentStateIndex:0,computedStates:[],isLocked:!1,isPaused:!1}}function Gr(t,i,e,n,r={}){return s=>(o,l)=>{let{monitorState:b,actionsById:a,nextActionId:E,stagedActionIds:c,skippedActionIds:A,committedState:C,currentStateIndex:y,computedStates:d,isLocked:P,isPaused:T}=o||i;o||(a=Object.create(a));function $(M){let _=M,q=c.slice(1,_+1);for(let U=0;U<q.length;U++)if(d[U+1].error){_=U,q=c.slice(1,_+1);break}else delete a[q[U]];A=A.filter(U=>q.indexOf(U)===-1),c=[0,...c.slice(_+1)],C=d[_].state,d=d.slice(_),y=y>_?y-_:0}function B(){a={0:oe(Ie)},E=1,c=[0],A=[],C=d[y].state,y=0,d=[]}let S=0;switch(l.type){case Zn:{P=l.status,S=1/0;break}case Kn:{T=l.status,T?(c=[...c,E],a[E]=new Y({type:"@ngrx/devtools/pause"},+Date.now()),E++,S=c.length-1,d=d.concat(d[d.length-1]),y===c.length-2&&y++,S=1/0):B();break}case Nn:{a={0:oe(Ie)},E=1,c=[0],A=[],C=t,y=0,d=[];break}case zn:{B();break}case Ln:{a={0:oe(Ie)},E=1,c=[0],A=[],y=0,d=[];break}case Vn:{let{id:M}=l;A.indexOf(M)===-1?A=[M,...A]:A=A.filter(q=>q!==M),S=c.indexOf(M);break}case $r:{let{start:M,end:_,active:q}=l,U=[];for(let we=M;we<_;we++)U.push(we);q?A=$n(A,U):A=[...A,...U],S=c.indexOf(M);break}case Gn:{y=l.index,S=1/0;break}case qn:{let M=c.indexOf(l.actionId);M!==-1&&(y=M),S=1/0;break}case Hn:{c=$n(c,A),A=[],y=Math.min(y,c.length-1);break}case ae:{if(P)return o||i;if(T||o&&ft(o.computedStates[y],l,r.predicate,r.actionsSafelist,r.actionsBlocklist)){let _=d[d.length-1];d=[...d.slice(0,-1),ir(s,l.action,_.state,_.error,e)],S=1/0;break}r.maxAge&&c.length===r.maxAge&&$(1),y===c.length-1&&y++;let M=E++;a[M]=l,c=[...c,M],S=c.length-1;break}case dt:{({monitorState:b,actionsById:a,nextActionId:E,stagedActionIds:c,skippedActionIds:A,committedState:C,currentStateIndex:y,computedStates:d,isLocked:P,isPaused:T}=l.nextLiftedState);break}case He:{S=0,r.maxAge&&c.length>r.maxAge&&(d=ke(d,S,s,C,a,c,A,e,T),$(c.length-r.maxAge),S=1/0);break}case Ve:{if(d.filter(_=>_.error).length>0)S=0,r.maxAge&&c.length>r.maxAge&&(d=ke(d,S,s,C,a,c,A,e,T),$(c.length-r.maxAge),S=1/0);else{if(!T&&!P){y===c.length-1&&y++;let _=E++;a[_]=new Y(l,+Date.now()),c=[...c,_],S=c.length-1,d=ke(d,S,s,C,a,c,A,e,T)}d=d.map(_=>R(k({},_),{state:s(_.state,Hr)})),y=c.length-1,r.maxAge&&c.length>r.maxAge&&$(c.length-r.maxAge),S=1/0}break}default:{S=1/0;break}}return d=ke(d,S,s,C,a,c,A,e,T),b=n(b,l),{monitorState:b,actionsById:a,nextActionId:E,stagedActionIds:c,skippedActionIds:A,committedState:C,currentStateIndex:y,computedStates:d,isLocked:P,isPaused:T}}}var jn=(()=>{class t{constructor(e,n,r,s,o,l,b,a){let E=Vr(b,a.monitor),c=Gr(b,E,l,a.monitor,a),A=X(X(n.asObservable().pipe(Ct(1)),s.actions$).pipe(p(oe)),e,s.liftedActions$).pipe(bt(gt)),C=r.pipe(p(c)),y=er(a.connectInZone),d=new yt(1);this.liftedStateSubscription=A.pipe(Tt(C),Dn(y),Mt(({state:$},[B,S])=>{let M=S($,B);return B.type!==ae&&Yn(a)&&(M=Lr(M,a.predicate,a.actionsSafelist,a.actionsBlocklist)),s.notify(B,M),{state:M,action:B}},{state:E,action:null})).subscribe(({state:$,action:B})=>{if(d.next($),B.type===ae){let S=B.action;o.next(S)}}),this.extensionStartSubscription=s.start$.pipe(Dn(y)).subscribe(()=>{this.refresh()});let P=d.asObservable(),T=P.pipe(p(Xn));Object.defineProperty(T,"state",{value:ti(T,{manualCleanup:!0,requireSync:!0})}),this.dispatcher=e,this.liftedState=P,this.state=T}ngOnDestroy(){this.liftedStateSubscription.unsubscribe(),this.extensionStartSubscription.unsubscribe()}dispatch(e){this.dispatcher.next(e)}next(e){this.dispatcher.next(e)}error(e){}complete(){}performAction(e){this.dispatch(new Y(e,+Date.now()))}refresh(){this.dispatch(new et)}reset(){this.dispatch(new tt(+Date.now()))}rollback(){this.dispatch(new it(+Date.now()))}commit(){this.dispatch(new nt(+Date.now()))}sweep(){this.dispatch(new rt)}toggleAction(e){this.dispatch(new st(e))}jumpToAction(e){this.dispatch(new at(e))}jumpToState(e){this.dispatch(new ot(e))}importState(e){this.dispatch(new ct(e))}lockChanges(e){this.dispatch(new lt(e))}pauseRecording(e){this.dispatch(new ut(e))}static{this.\u0275fac=function(n){return new(n||t)(h(Me),h(ye),h(oi),h(tr),h(ge),h(de),h(ni),h(Fe))}}static{this.\u0275prov=F({token:t,factory:t.\u0275fac})}}return t})();function Dn({ngZone:t,connectInZone:i}){return e=>i?new te(n=>e.subscribe({next:r=>t.run(()=>n.next(r)),error:r=>t.run(()=>n.error(r)),complete:()=>t.run(()=>n.complete())})):e}var qr=new x("@ngrx/store-devtools Is Devtools Extension or Monitor Present");function Zr(t,i){return!!t||i.monitor!==Jn}function Kr(){let t="__REDUX_DEVTOOLS_EXTENSION__";return typeof window=="object"&&typeof window[t]<"u"?window[t]:null}function Jr(t){return t.state}function nr(t={}){return le([tr,Me,jn,{provide:Pn,useValue:t},{provide:qr,deps:[pt,Fe],useFactory:Zr},{provide:pt,useFactory:Kr},{provide:Fe,deps:[Pn],useFactory:jr},{provide:ci,deps:[jn],useFactory:Jr},{provide:ai,useExisting:Me}])}var rr=(t,i)=>{let e=u(w),n=u(L),r=typeof window<"u"?localStorage.getItem("token"):null,s=r?t.clone({setHeaders:{Authorization:`Bearer ${r}`}}):t;return i(s).pipe(m(o=>(o.status===401&&(n.dispatch(V()),e.navigate(["/login"])),At(()=>o))))};var sr={production:!1,apiUrl:"https://pictune.onrender.com/api"};var z=class t{constructor(i){this.http=i}apiUrl=sr.apiUrl;login(i,e){return this.http.post(`${this.apiUrl}/auth/signin`,{userName:i,password:e})}getUsers(){return console.log("getusers"),this.http.get(`${this.apiUrl}/users`)}getUserProfile(i){return this.http.get(`${this.apiUrl}/users/${i}`)}createUser(i){return this.http.post(`${this.apiUrl}/auth/signup`,i)}updateUser(i,e){return this.http.put(`${this.apiUrl}/users/${i}`,e)}deleteUser(i){return this.http.delete(`${this.apiUrl}/users/${i}`)}getMusicFiles(i,e){let n=`${this.apiUrl}/files`,r={};if(i!==void 0&&(r.owner=i),e!==void 0&&(r.favorites=e),Object.keys(r).length>0){let s=new URLSearchParams;for(let o in r)s.set(o,r[o]);n+=`?${s.toString()}`}return this.http.get(n)}getMusicFile(i){return this.http.get(`${this.apiUrl}/files/${i}`)}updateMusicFile(i,e){return this.http.put(`${this.apiUrl}/files/${i}`,e)}deleteMusicFile(i){return this.http.delete(`${this.apiUrl}/files/${i}`)}getMusicFileUrl(i){return this.http.get(`${this.apiUrl}/files/${i}/play`)}toggleLike(i){return this.http.post(`${this.apiUrl}/files/${i}/like`,{})}extractImage(i){return this.http.get(`${this.apiUrl}/files/extract-image?fileKey=${i}`,{responseType:"blob"})}getPlaylists(){return this.http.get(`${this.apiUrl}/playlists`)}getPlaylist(i){return this.http.get(`${this.apiUrl}/playlists/${i}`)}createPlaylist(i){return this.http.post(`${this.apiUrl}/playlists`,i)}updatePlaylist(i,e){return this.http.put(`${this.apiUrl}/playlists/${i}`,e)}deletePlaylist(i){return this.http.delete(`${this.apiUrl}/playlists/${i}`)}addToPlaylist(i,e){return this.http.post(`${this.apiUrl}/playlists/${i}/files/${e}`,{})}removeFromPlaylist(i,e){return this.http.delete(`${this.apiUrl}/playlists/${i}/files/${e}`)}getReportSummary(){return this.http.get(`${this.apiUrl}/reports/summary`)}static \u0275fac=function(e){return new(e||t)(h(Kt))};static \u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"})};function Xr(t,i){if(t&1){let e=Vt();me(0,"div",1)(1,"button",2),$e("click",function(){wt(e);let r=Be();return Rt(r.action())}),Le(2),re()()}if(t&2){let e=Be();ie(2),ze(" ",e.data.action," ")}}var Wr=["label"];function Qr(t,i){}var Yr=Math.pow(2,31)-1,ce=class{_overlayRef;instance;containerInstance;_afterDismissed=new j;_afterOpened=new j;_onAction=new j;_durationTimeoutId;_dismissedByAction=!1;constructor(i,e){this._overlayRef=e,this.containerInstance=i,i._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(i){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(i,Yr))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}},ar=new x("MatSnackBarData"),ee=class{politeness="assertive";announcementMessage="";viewContainerRef;duration=0;panelClass;direction;data=null;horizontalPosition="center";verticalPosition="bottom"},es=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275dir=fe({type:t,selectors:[["","matSnackBarLabel",""]],hostAttrs:[1,"mat-mdc-snack-bar-label","mdc-snackbar__label"]})}return t})(),ts=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275dir=fe({type:t,selectors:[["","matSnackBarActions",""]],hostAttrs:[1,"mat-mdc-snack-bar-actions","mdc-snackbar__actions"]})}return t})(),is=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275dir=fe({type:t,selectors:[["","matSnackBarAction",""]],hostAttrs:[1,"mat-mdc-snack-bar-action","mdc-snackbar__action"]})}return t})(),ns=(()=>{class t{snackBarRef=u(ce);data=u(ar);constructor(){}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=ne({type:t,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-mdc-simple-snack-bar"],exportAs:["matSnackBar"],decls:3,vars:2,consts:[["matSnackBarLabel",""],["matSnackBarActions",""],["mat-button","","matSnackBarAction","",3,"click"]],template:function(n,r){n&1&&(me(0,"div",0),Le(1),re(),Pe(2,Xr,3,1,"div",1)),n&2&&(ie(),ze(" ",r.data.message,`
`),ie(),Ht(r.hasAction?2:-1))},dependencies:[vi,es,ts,is],styles:[".mat-mdc-simple-snack-bar{display:flex}"],encapsulation:2,changeDetection:0})}return t})(),mt="_mat-snack-bar-enter",ht="_mat-snack-bar-exit",rs=(()=>{class t extends Si{_ngZone=u(pe);_elementRef=u(Pt);_changeDetectorRef=u(Gt);_platform=u(mi);_rendersRef;_animationsDisabled=u($t,{optional:!0})==="NoopAnimations";snackBarConfig=u(ee);_document=u(qt);_trackedModals=new Set;_enterFallback;_exitFallback;_renders=new j;_announceDelay=150;_announceTimeoutId;_destroyed=!1;_portalOutlet;_onAnnounce=new j;_onExit=new j;_onEnter=new j;_animationState="void";_live;_label;_role;_liveElementId=u(gi).getId("mat-snack-bar-container-live-");constructor(){super();let e=this.snackBarConfig;e.politeness==="assertive"&&!e.announcementMessage?this._live="assertive":e.politeness==="off"?this._live="off":this._live="polite",this._platform.FIREFOX&&(this._live==="polite"&&(this._role="status"),this._live==="assertive"&&(this._role="alert")),this._rendersRef=Bt(()=>this._renders.next(),{manualCleanup:!0})}attachComponentPortal(e){this._assertNotAttached();let n=this._portalOutlet.attachComponentPortal(e);return this._afterPortalAttached(),n}attachTemplatePortal(e){this._assertNotAttached();let n=this._portalOutlet.attachTemplatePortal(e);return this._afterPortalAttached(),n}attachDomPortal=e=>{this._assertNotAttached();let n=this._portalOutlet.attachDomPortal(e);return this._afterPortalAttached(),n};onAnimationEnd(e){e===ht?this._completeExit():e===mt&&(clearTimeout(this._enterFallback),this._ngZone.run(()=>{this._onEnter.next(),this._onEnter.complete()}))}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.markForCheck(),this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce(),this._animationsDisabled?this._renders.pipe(H(1)).subscribe(()=>{this._ngZone.run(()=>queueMicrotask(()=>this.onAnimationEnd(mt)))}):(clearTimeout(this._enterFallback),this._enterFallback=setTimeout(()=>{this._elementRef.nativeElement.classList.add("mat-snack-bar-fallback-visible"),this.onAnimationEnd(mt)},200)))}exit(){return this._destroyed?f(void 0):(this._ngZone.run(()=>{this._animationState="hidden",this._changeDetectorRef.markForCheck(),this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId),this._animationsDisabled?this._renders.pipe(H(1)).subscribe(()=>{this._ngZone.run(()=>queueMicrotask(()=>this.onAnimationEnd(ht)))}):(clearTimeout(this._exitFallback),this._exitFallback=setTimeout(()=>this.onAnimationEnd(ht),200))}),this._onExit)}ngOnDestroy(){this._destroyed=!0,this._clearFromModals(),this._completeExit(),this._renders.complete(),this._rendersRef.destroy()}_completeExit(){clearTimeout(this._exitFallback),queueMicrotask(()=>{this._onExit.next(),this._onExit.complete()})}_afterPortalAttached(){let e=this._elementRef.nativeElement,n=this.snackBarConfig.panelClass;n&&(Array.isArray(n)?n.forEach(o=>e.classList.add(o)):e.classList.add(n)),this._exposeToModals();let r=this._label.nativeElement,s="mdc-snackbar__label";r.classList.toggle(s,!r.querySelector(`.${s}`))}_exposeToModals(){let e=this._liveElementId,n=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let r=0;r<n.length;r++){let s=n[r],o=s.getAttribute("aria-owns");this._trackedModals.add(s),o?o.indexOf(e)===-1&&s.setAttribute("aria-owns",o+" "+e):s.setAttribute("aria-owns",e)}}_clearFromModals(){this._trackedModals.forEach(e=>{let n=e.getAttribute("aria-owns");if(n){let r=n.replace(this._liveElementId,"").trim();r.length>0?e.setAttribute("aria-owns",r):e.removeAttribute("aria-owns")}}),this._trackedModals.clear()}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{if(this._destroyed)return;let e=this._elementRef.nativeElement,n=e.querySelector("[aria-hidden]"),r=e.querySelector("[aria-live]");if(n&&r){let s=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&n.contains(document.activeElement)&&(s=document.activeElement),n.removeAttribute("aria-hidden"),r.appendChild(n),s?.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=ne({type:t,selectors:[["mat-snack-bar-container"]],viewQuery:function(n,r){if(n&1&&(je(qe,7),je(Wr,7)),n&2){let s;De(s=Ne())&&(r._portalOutlet=s.first),De(s=Ne())&&(r._label=s.first)}},hostAttrs:[1,"mdc-snackbar","mat-mdc-snack-bar-container"],hostVars:6,hostBindings:function(n,r){n&1&&$e("animationend",function(o){return r.onAnimationEnd(o.animationName)})("animationcancel",function(o){return r.onAnimationEnd(o.animationName)}),n&2&&zt("mat-snack-bar-container-enter",r._animationState==="visible")("mat-snack-bar-container-exit",r._animationState==="hidden")("mat-snack-bar-container-animations-enabled",!r._animationsDisabled)},features:[Nt],decls:6,vars:3,consts:[["label",""],[1,"mdc-snackbar__surface","mat-mdc-snackbar-surface"],[1,"mat-mdc-snack-bar-label"],["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(n,r){n&1&&(me(0,"div",1)(1,"div",2,0)(3,"div",3),Pe(4,Qr,0,0,"ng-template",4),re(),he(5,"div"),re()()),n&2&&(ie(5),Lt("aria-live",r._live)("role",r._role)("id",r._liveElementId))},dependencies:[qe],styles:["@keyframes _mat-snack-bar-enter{from{transform:scale(0.8);opacity:0}to{transform:scale(1);opacity:1}}@keyframes _mat-snack-bar-exit{from{opacity:1}to{opacity:0}}.mat-mdc-snack-bar-container{display:flex;align-items:center;justify-content:center;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0);margin:8px}.mat-mdc-snack-bar-handset .mat-mdc-snack-bar-container{width:100vw}.mat-snack-bar-container-animations-enabled{opacity:0}.mat-snack-bar-container-animations-enabled.mat-snack-bar-fallback-visible{opacity:1}.mat-snack-bar-container-animations-enabled.mat-snack-bar-container-enter{animation:_mat-snack-bar-enter 150ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-snack-bar-container-animations-enabled.mat-snack-bar-container-exit{animation:_mat-snack-bar-exit 75ms cubic-bezier(0.4, 0, 1, 1) forwards}.mat-mdc-snackbar-surface{box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12);display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;padding-left:0;padding-right:8px}[dir=rtl] .mat-mdc-snackbar-surface{padding-right:0;padding-left:8px}.mat-mdc-snack-bar-container .mat-mdc-snackbar-surface{min-width:344px;max-width:672px}.mat-mdc-snack-bar-handset .mat-mdc-snackbar-surface{width:100%;min-width:0}@media(forced-colors: active){.mat-mdc-snackbar-surface{outline:solid 1px}}.mat-mdc-snack-bar-container .mat-mdc-snackbar-surface{color:var(--mdc-snackbar-supporting-text-color, var(--mat-sys-inverse-on-surface));border-radius:var(--mdc-snackbar-container-shape, var(--mat-sys-corner-extra-small));background-color:var(--mdc-snackbar-container-color, var(--mat-sys-inverse-surface))}.mdc-snackbar__label{width:100%;flex-grow:1;box-sizing:border-box;margin:0;padding:14px 8px 14px 16px}[dir=rtl] .mdc-snackbar__label{padding-left:8px;padding-right:16px}.mat-mdc-snack-bar-container .mdc-snackbar__label{font-family:var(--mdc-snackbar-supporting-text-font, var(--mat-sys-body-medium-font));font-size:var(--mdc-snackbar-supporting-text-size, var(--mat-sys-body-medium-size));font-weight:var(--mdc-snackbar-supporting-text-weight, var(--mat-sys-body-medium-weight));line-height:var(--mdc-snackbar-supporting-text-line-height, var(--mat-sys-body-medium-line-height))}.mat-mdc-snack-bar-actions{display:flex;flex-shrink:0;align-items:center;box-sizing:border-box}.mat-mdc-snack-bar-handset,.mat-mdc-snack-bar-container,.mat-mdc-snack-bar-label{flex:1 1 auto}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled).mat-unthemed{color:var(--mat-snack-bar-button-color, var(--mat-sys-inverse-primary))}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled){--mat-text-button-state-layer-color:currentColor;--mat-text-button-ripple-color:currentColor}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled) .mat-ripple-element{opacity:.1}"],encapsulation:2})}return t})();function ss(){return new ee}var os=new x("mat-snack-bar-default-options",{providedIn:"root",factory:ss}),K=(()=>{class t{_overlay=u(_i);_live=u(yi);_injector=u(ue);_breakpointObserver=u(hi);_parentSnackBar=u(t,{optional:!0,skipSelf:!0});_defaultConfig=u(os);_snackBarRefAtThisLevel=null;simpleSnackBarComponent=ns;snackBarContainerComponent=rs;handsetCssClass="mat-mdc-snack-bar-handset";get _openedSnackBarRef(){let e=this._parentSnackBar;return e?e._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(e){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=e:this._snackBarRefAtThisLevel=e}constructor(){}openFromComponent(e,n){return this._attach(e,n)}openFromTemplate(e,n){return this._attach(e,n)}open(e,n="",r){let s=k(k({},this._defaultConfig),r);return s.data={message:e,action:n},s.announcementMessage===e&&(s.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,s)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(e,n){let r=n&&n.viewContainerRef&&n.viewContainerRef.injector,s=ue.create({parent:r||this._injector,providers:[{provide:ee,useValue:n}]}),o=new Ge(this.snackBarContainerComponent,n.viewContainerRef,s),l=e.attach(o);return l.instance.snackBarConfig=n,l.instance}_attach(e,n){let r=k(k(k({},new ee),this._defaultConfig),n),s=this._createOverlay(r),o=this._attachSnackBarContainer(s,r),l=new ce(o,s);if(e instanceof jt){let b=new Ai(e,null,{$implicit:r.data,snackBarRef:l});l.instance=o.attachTemplatePortal(b)}else{let b=this._createInjector(r,l),a=new Ge(e,void 0,b),E=o.attachComponentPortal(a);l.instance=E.instance}return this._breakpointObserver.observe(bi.HandsetPortrait).pipe(W(s.detachments())).subscribe(b=>{s.overlayElement.classList.toggle(this.handsetCssClass,b.matches)}),r.announcementMessage&&o._onAnnounce.subscribe(()=>{this._live.announce(r.announcementMessage,r.politeness)}),this._animateSnackBar(l,r),this._openedSnackBarRef=l,this._openedSnackBarRef}_animateSnackBar(e,n){e.afterDismissed().subscribe(()=>{this._openedSnackBarRef==e&&(this._openedSnackBarRef=null),n.announcementMessage&&this._live.clear()}),n.duration&&n.duration>0&&e.afterOpened().subscribe(()=>e._dismissAfter(n.duration)),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{e.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):e.containerInstance.enter()}_createOverlay(e){let n=new Ei;n.direction=e.direction;let r=this._overlay.position().global(),s=e.direction==="rtl",o=e.horizontalPosition==="left"||e.horizontalPosition==="start"&&!s||e.horizontalPosition==="end"&&s,l=!o&&e.horizontalPosition!=="center";return o?r.left("0"):l?r.right("0"):r.centerHorizontally(),e.verticalPosition==="top"?r.top("0"):r.bottom("0"),n.positionStrategy=r,this._overlay.create(n)}_createInjector(e,n){let r=e&&e.viewContainerRef&&e.viewContainerRef.injector;return ue.create({parent:r||this._injector,providers:[{provide:ce,useValue:n},{provide:ar,useValue:e.data}]})}static \u0275fac=function(n){return new(n||t)};static \u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var xe=class t{constructor(i,e,n,r){this.actions$=i;this.apiService=e;this.router=n;this.snackBar=r;this.init$=g(()=>this.actions$.pipe(v(Qe),p(()=>{let s=typeof window<"u"?localStorage.getItem("token"):null,o=typeof window<"u"?localStorage.getItem("user"):null;return s&&o?se():V()}))),this.login$=g(()=>this.actions$.pipe(v(ve),N(s=>this.apiService.login(s.request.userName,s.request.password).pipe(p(o=>(localStorage.setItem("user",JSON.stringify(o.user)),localStorage.setItem("token",o.token),Q({response:o}))),m(o=>f(be({error:o.error?.message||"Login failed"}))))))),this.loginSuccess$=g(()=>this.actions$.pipe(v(Q),O(()=>{let s=typeof window<"u"?localStorage.getItem("user"):null;(s?JSON.parse(s):null)?.roles?.includes("Admin")?this.router.navigate(["/"]):(this.snackBar.open("Access denied: Admins only","Close",{duration:3e3}),typeof window<"u"&&localStorage.removeItem("token"),typeof window<"u"&&localStorage.removeItem("user"),this.router.navigate(["/login"]))})),{dispatch:!1}),this.autoLogin$=g(()=>this.actions$.pipe(v(se),N(()=>{let s=typeof window<"u"?localStorage.getItem("token"):null,o=typeof window<"u"?JSON.parse(localStorage.getItem("user")):null;return!s||!o||!o.roles?.includes("Admin")?f(V()):f(Q({response:{token:s,user:o}}))}),m(()=>f(V())))),this.logout$=g(()=>this.actions$.pipe(v(V),O(()=>{typeof window<"u"&&localStorage.removeItem("token"),typeof window<"u"&&localStorage.removeItem("user"),this.router.navigate(["/login"])})),{dispatch:!1})}init$;login$;loginSuccess$;autoLogin$;loadUserProfile$;logout$;static \u0275fac=function(e){return new(e||t)(h(Z),h(z),h(w),h(K))};static \u0275prov=F({token:t,factory:t.\u0275fac})};var Ce=class t{actions$=u(Z);apiService=u(z);snackBar=u(K);router=u(w);loadMusicFiles$=g(()=>this.actions$.pipe(v(Xe),O(()=>console.log("[Effect] loadFiles triggered")),N(i=>this.apiService.getMusicFiles(i.owner,i.favorites).pipe(p(e=>Bi({musicFiles:e})),m(e=>f(ji({error:e.error?.message||"Failed to load music files"})))))));loadMusicFile$=g(()=>this.actions$.pipe(v(Di),I(i=>this.apiService.getMusicFile(i.id).pipe(p(e=>Ni({musicFile:e})),m(e=>f(Li({error:e.error?.message||"Failed to load music file"})))))));updateMusicFile$=g(()=>this.actions$.pipe(v(zi),I(i=>this.apiService.updateMusicFile(i.id,i.musicFile).pipe(p(()=>(this.snackBar.open("Music file updated successfully","Close",{duration:3e3}),this.router.navigate(["/music-files"]),Xe({}))),m(e=>(this.snackBar.open(e.error?.message||"Failed to update music file","Close",{duration:3e3}),f(Hi({error:e.error?.message||"Failed to update music file"}))))))));deleteMusicFile$=g(()=>this.actions$.pipe(v(Vi),I(i=>this.apiService.deleteMusicFile(i.id).pipe(p(()=>(this.snackBar.open("Music file deleted successfully","Close",{duration:3e3}),Gi({id:i.id}))),m(e=>(this.snackBar.open(e.error?.message||"Failed to delete music file","Close",{duration:3e3}),f(qi({error:e.error?.message||"Failed to delete music file"}))))))));toggleLike$=g(()=>this.actions$.pipe(v(Zi),I(i=>this.apiService.toggleLike(i.id).pipe(p(()=>Ki({id:i.id})),m(e=>f(Ji({error:e.error?.message||"Failed to toggle like"})))))));getMusicFileUrl$=g(()=>this.actions$.pipe(v(Xi),I(i=>this.apiService.getMusicFileUrl(i.id).pipe(p(e=>Wi({id:i.id,url:e.url})),m(e=>f(Qi({error:e.error?.message||"Failed to get music file URL"})))))));static \u0275fac=function(e){return new(e||t)};static \u0275prov=F({token:t,factory:t.\u0275fac})};var Te=class t{actions$=u(Z);apiService=u(z);snackBar=u(K);router=u(w);loadPlaylists$=g(()=>this.actions$.pipe(v(en),N(()=>this.apiService.getPlaylists().pipe(p(i=>tn({playlists:i})),m(i=>f(nn({error:i.error?.message||"Failed to load playlists"})))))));loadPlaylist$=g(()=>this.actions$.pipe(v(rn),I(i=>this.apiService.getPlaylist(i.id).pipe(p(e=>sn({playlist:e})),m(e=>f(on({error:e.error?.message||"Failed to load playlist"})))))));createPlaylist$=g(()=>this.actions$.pipe(v(an),I(i=>this.apiService.createPlaylist(i.playlist).pipe(p(e=>(this.snackBar.open("Playlist created successfully","Close",{duration:3e3}),this.router.navigate(["/playlists"]),cn({playlist:e}))),m(e=>(this.snackBar.open(e.error?.message||"Failed to create playlist","Close",{duration:3e3}),f(ln({error:e.error?.message||"Failed to create playlist"}))))))));updatePlaylist$=g(()=>this.actions$.pipe(v(un),I(i=>this.apiService.updatePlaylist(i.id,i.playlist).pipe(p(e=>(this.snackBar.open("Playlist updated successfully","Close",{duration:3e3}),this.router.navigate(["/playlists"]),pn({playlist:e}))),m(e=>(this.snackBar.open(e.error?.message||"Failed to update playlist","Close",{duration:3e3}),f(dn({error:e.error?.message||"Failed to update playlist"}))))))));deletePlaylist$=g(()=>this.actions$.pipe(v(fn),I(i=>this.apiService.deletePlaylist(i.id).pipe(p(()=>(this.snackBar.open("Playlist deleted successfully","Close",{duration:3e3}),mn({id:i.id}))),m(e=>(this.snackBar.open(e.error?.message||"Failed to delete playlist","Close",{duration:3e3}),f(hn({error:e.error?.message||"Failed to delete playlist"}))))))));addToPlaylist$=g(()=>this.actions$.pipe(v(yn),I(i=>this.apiService.addToPlaylist(i.playlistId,i.musicFileId).pipe(p(()=>(this.snackBar.open("Music file added to playlist","Close",{duration:3e3}),gn({playlistId:i.playlistId,musicFileId:i.musicFileId}))),m(e=>(this.snackBar.open(e.error?.message||"Failed to add music file to playlist","Close",{duration:3e3}),f(vn({error:e.error?.message||"Failed to add music file to playlist"}))))))));removeFromPlaylist$=g(()=>this.actions$.pipe(v(bn),I(i=>this.apiService.removeFromPlaylist(i.playlistId,i.musicFileId).pipe(p(()=>(this.snackBar.open("Music file removed from playlist","Close",{duration:3e3}),An({playlistId:i.playlistId,musicFileId:i.musicFileId}))),m(e=>(this.snackBar.open(e.error?.message||"Failed to remove music file from playlist","Close",{duration:3e3}),f(Sn({error:e.error?.message||"Failed to remove music file from playlist"}))))))));static \u0275fac=function(e){return new(e||t)};static \u0275prov=F({token:t,factory:t.\u0275fac})};var Oe=class t{constructor(i,e,n,r){this.actions$=i;this.apiService=e;this.snackBar=n;this.router=r;this.loadUsers$=g(()=>this.actions$.pipe(v(ki),O(()=>console.log("[Effect] loadUsers triggered")),I(()=>this.apiService.getUsers().pipe(p(s=>(console.log("[Effect] loadUsers success",s),Ii({users:s}))),m(s=>(console.error("[Effect] loadUsers error",s),f(Fi({error:s.error?.message||"Failed to load users"})))))))),this.loadUser$=g(()=>this.actions$.pipe(v(Mi),O(()=>console.log("[Effect] loadUser triggered")),I(s=>this.apiService.getUserProfile(s.id).pipe(p(o=>(console.log("[Effect] loadUser success",o),xi({user:o}))),m(o=>(console.error("[Effect] loadUser error",o),f(Ci({error:o.error?.message||"Failed to load user"})))))))),this.createUser$=g(()=>this.actions$.pipe(v(Ti),O(s=>console.log("[Effect] createUser triggered",s)),I(s=>this.apiService.createUser(s.user).pipe(p(()=>(console.log("[Effect] createUser success",s.user),Ze({user:s.user}))),m(o=>(console.error("[Effect] createUser error",o),f(Oi({error:o.error?.message||"Failed to create user"})))))))),this.createUserSuccess$=g(()=>this.actions$.pipe(v(Ze),O(()=>{console.log("[Effect] createUserSuccess"),this.snackBar.open("User created successfully","Close",{duration:3e3}),this.router.navigate(["/users"])})),{dispatch:!1}),this.updateUser$=g(()=>this.actions$.pipe(v(wi),O(s=>console.log("[Effect] updateUser triggered",s)),I(s=>this.apiService.updateUser(s.id,s.user).pipe(p(o=>(console.log("[Effect] updateUser success",o),Ke({user:o}))),m(o=>(console.error("[Effect] updateUser error",o),f(Ri({error:o.error?.message||"Failed to update user"})))))))),this.updateUserSuccess$=g(()=>this.actions$.pipe(v(Ke),O(()=>{console.log("[Effect] updateUserSuccess"),this.snackBar.open("User updated successfully","Close",{duration:3e3}),this.router.navigate(["/users"])})),{dispatch:!1}),this.deleteUser$=g(()=>this.actions$.pipe(v(Ui),O(s=>console.log("[Effect] deleteUser triggered",s)),I(s=>this.apiService.deleteUser(s.id).pipe(p(()=>(console.log("[Effect] deleteUser success",s.id),Je({id:s.id}))),m(o=>(console.error("[Effect] deleteUser error",o),f(Pi({error:o.error?.message||"Failed to delete user"})))))))),this.deleteUserSuccess$=g(()=>this.actions$.pipe(v(Je),O(()=>{console.log("[Effect] deleteUserSuccess"),this.snackBar.open("User deleted successfully","Close",{duration:3e3})})),{dispatch:!1})}loadUsers$;loadUser$;createUser$;createUserSuccess$;updateUser$;updateUserSuccess$;deleteUser$;deleteUserSuccess$;static \u0275fac=function(e){return new(e||t)(h(Z),h(z),h(K),h(w))};static \u0275prov=F({token:t,factory:t.\u0275fac})};var lr=[xe,Oe,Ce,Te];var as={user:null,token:null,roles:[],isAuthenticated:!1,loading:!1,error:null},ur=ui(as,J(ve,t=>R(k({},t),{loading:!0,error:null})),J(Q,(t,{response:i})=>R(k({},t),{token:i.token,user:i.user,isAuthenticated:!0,loading:!1,error:null})),J(be,(t,{error:i})=>R(k({},t),{loading:!1,error:i})),J(V,t=>R(k({},t),{user:null,token:null,roles:[],isAuthenticated:!1,error:null})),J(pi,(t,{user:i})=>R(k({},t),{user:i,loading:!1})),J(di,(t,{error:i})=>R(k({},t),{loading:!1,error:i})));var pr={auth:ur,users:$i,musicFiles:Yi,playlists:En};var dr={providers:[ei(Fn),Jt(Qt(),Wt(),Xt([rr])),li(pr),Rn(lr),nr()]};Zt(Ae,dr).catch(t=>console.error(t));
