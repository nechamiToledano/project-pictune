import{a as R,b as $,c as j,e as q,f as G}from"./chunk-CJGG3F3I.js";import{b as Y,c as Z}from"./chunk-3ITUBIXZ.js";import{d as Q,g as W,j as X}from"./chunk-KG45P2CG.js";import"./chunk-I3QGOUHP.js";import{a as U,b as z}from"./chunk-SLGXTDFG.js";import{a as k,b as V,g as L,h as H}from"./chunk-ZX2763UK.js";import{a as J,b as K}from"./chunk-OUGBS6IF.js";import{a as _,c as b}from"./chunk-VZDUFQRZ.js";import{a as E,b as C,d as x,e as I,g as A,h as N,i as O,j as B,l as w}from"./chunk-2XJNOYJH.js";import{n as T,o as D}from"./chunk-YZJZENHB.js";import{Eb as f,Fb as P,Pb as l,Qb as y,Rc as S,Ta as n,Xb as h,Ya as s,Yb as v,cb as F,hb as p,nb as u,qc as M,sb as d,wb as r,xb as e,yb as c}from"./chunk-6WES2Y7B.js";function it(t,a){t&1&&(r(0,"mat-error"),l(1," Name is required "),e())}function et(t,a){t&1&&(r(0,"mat-error"),l(1," Description is required "),e())}function ot(t,a){t&1&&c(0,"mat-spinner",9)}function rt(t,a){if(t&1&&(r(0,"span"),l(1),e()),t&2){let i=P();n(),y(i.isEditMode?"Update":"Create")}}var tt=class t{constructor(a,i,o,m){this.formBuilder=a;this.route=i;this.router=o;this.store=m;this.loading$=this.store.select(Z),this.selectedPlaylist$=this.store.select(Y)}playlistForm;playlistId=null;isEditMode=!1;loading$;selectedPlaylist$;ngOnInit(){this.initForm();let a=this.route.snapshot.paramMap.get("id");a&&(this.playlistId=+a,this.isEditMode=!0,this.store.dispatch(Q({id:this.playlistId})),this.selectedPlaylist$.subscribe(i=>{i&&this.playlistForm.patchValue({name:i.name,description:i.description})}))}initForm(){this.playlistForm=this.formBuilder.group({name:["",[C.required]],description:["",[C.required]]})}onSubmit(){this.playlistForm.invalid||(this.isEditMode&&this.playlistId?this.store.dispatch(X({id:this.playlistId,playlist:{name:this.playlistForm.value.name,description:this.playlistForm.value.description}})):this.store.dispatch(W({playlist:{name:this.playlistForm.value.name,description:this.playlistForm.value.description}})))}onCancel(){this.router.navigate(["/playlists"])}static \u0275fac=function(i){return new(i||t)(s(B),s(_),s(b),s(S))};static \u0275cmp=F({type:t,selectors:[["app-playlist-form"]],decls:27,vars:10,consts:[[1,"playlist-form-container"],[3,"ngSubmit","formGroup"],[1,"form-row"],["appearance","outline",1,"full-width"],["matInput","","formControlName","name","placeholder","Enter playlist name"],["matInput","","formControlName","description","placeholder","Enter playlist description","rows","4"],[1,"form-actions"],["mat-button","","type","button",3,"click"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["diameter","20"]],template:function(i,o){if(i&1&&(r(0,"div",0)(1,"mat-card")(2,"mat-card-header")(3,"mat-card-title"),l(4),e()(),r(5,"mat-card-content")(6,"form",1),f("ngSubmit",function(){return o.onSubmit()}),r(7,"div",2)(8,"mat-form-field",3)(9,"mat-label"),l(10,"Name"),e(),c(11,"input",4),p(12,it,2,0,"mat-error"),e()(),r(13,"div",2)(14,"mat-form-field",3)(15,"mat-label"),l(16,"Description"),e(),c(17,"textarea",5),p(18,et,2,0,"mat-error"),e()(),r(19,"div",6)(20,"button",7),f("click",function(){return o.onCancel()}),l(21,"Cancel"),e(),r(22,"button",8),h(23,"async"),p(24,ot,1,0,"mat-spinner",9),h(25,"async"),p(26,rt,2,1,"span"),e()()()()()()),i&2){let m,g;n(4),y(o.isEditMode?"Edit Playlist":"Create Playlist"),n(2),u("formGroup",o.playlistForm),n(6),d((m=o.playlistForm.get("name"))!=null&&m.hasError("required")?12:-1),n(6),d((g=o.playlistForm.get("description"))!=null&&g.hasError("required")?18:-1),n(4),u("disabled",o.playlistForm.invalid||v(23,6,o.loading$)),n(2),d(v(25,8,o.loading$)?24:26)}},dependencies:[M,w,A,E,x,I,N,O,G,R,j,q,$,H,L,k,V,z,U,D,T,K,J],styles:[".playlist-form-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto}.form-row[_ngcontent-%COMP%]{margin-bottom:16px}.full-width[_ngcontent-%COMP%]{width:100%}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:8px;margin-top:24px}mat-spinner[_ngcontent-%COMP%]{display:inline-block;margin-right:8px}"]})};export{tt as PlaylistFormComponent};
